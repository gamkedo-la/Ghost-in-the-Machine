var S2R1Level = new LevelClass();
S2R1Level.levelJSON = '{"playerStart":{"x":0,"y":0,"rot":4.71238898038469},"startIndex":0,"startList":[{"x":0,"y":0,"rot":4.71238898038469},{"x":8,"y":-221,"rot":1.5707963267948948}],"walls":[{"p1":{"x":-134,"y":15},"p2":{"x":-14,"y":15},"color":"darkgrey","textureOffset":0,"transparency":false,"texture":"metalWall1"},{"p1":{"x":15,"y":15},"p2":{"x":125,"y":13},"color":"darkgrey","textureOffset":90,"transparency":false,"texture":"metalWall1"},{"p1":{"x":125,"y":13},"p2":{"x":127,"y":-63},"color":"darkgrey","textureOffset":90.18180315800532,"transparency":false,"texture":"metalWall1"},{"p1":{"x":123,"y":-95},"p2":{"x":115,"y":-155},"color":"darkgrey","textureOffset":72.93522543987581,"transparency":false,"texture":"metalWall1"},{"p1":{"x":113,"y":-184},"p2":{"x":115,"y":-234},"color":"darkgrey","textureOffset":68.93390053171072,"transparency":false,"texture":"metalWall1"},{"p1":{"x":115,"y":-234},"p2":{"x":23,"y":-235},"color":"darkgrey","textureOffset":69.33374065958287,"transparency":false,"texture":"metalWall1"},{"p1":{"x":-10,"y":-235},"p2":{"x":-136,"y":-235},"color":"darkgrey","textureOffset":19.388086880500396,"transparency":false,"texture":"metalWall1"},{"p1":{"x":-136,"y":-235},"p2":{"x":-136,"y":-187},"color":"darkgrey","textureOffset":79.3880868805004,"transparency":false,"texture":"metalWall1"},{"p1":{"x":-136,"y":-159},"p2":{"x":-136,"y":-100},"color":"darkgrey","textureOffset":39.388086880500396,"transparency":false,"texture":"metalWall1"},{"p1":{"x":-136,"y":-100},"p2":{"x":-139,"y":-71},"color":"darkgrey","textureOffset":29.388086880500396,"transparency":false,"texture":"metalWall1"},{"p1":{"x":-139,"y":-46},"p2":{"x":-134,"y":15},"color":"darkgrey","textureOffset":70.9356816227654,"transparency":false,"texture":"metalWall1"},{"p1":{"x":-139,"y":-71},"p2":{"x":-149,"y":-73},"color":"blue","textureOffset":0,"transparency":false,"texture":"blueWall"},{"p1":{"x":-149,"y":-73},"p2":{"x":-153,"y":-112},"color":"red","textureOffset":1.980390271855697,"transparency":false,"texture":"redWall"},{"p1":{"x":-153,"y":-112},"p2":{"x":-207,"y":-113},"color":"red","textureOffset":94.0263059501089,"transparency":false,"texture":"redWall"},{"p1":{"x":-207,"y":-113},"p2":{"x":-204,"y":-10},"color":"red","textureOffset":34.118890605740035,"transparency":false,"texture":"redWall"},{"p1":{"x":-204,"y":-10},"p2":{"x":-154,"y":-11},"color":"red","textureOffset":64.55569119081224,"transparency":false,"texture":"redWall"},{"p1":{"x":-154,"y":-11},"p2":{"x":-152,"y":-46},"color":"red","textureOffset":64.6556811928117,"transparency":false,"texture":"redWall"},{"p1":{"x":-152,"y":-46},"p2":{"x":-139,"y":-46},"color":"blue","textureOffset":15.226644051973835,"transparency":false,"texture":"blueWall"},{"p1":{"x":-136,"y":-187},"p2":{"x":-148,"y":-188},"color":"blue","textureOffset":0,"transparency":false,"texture":"blueWall"},{"p1":{"x":-148,"y":-188},"p2":{"x":-155,"y":-237},"color":"red","textureOffset":20.415945787922965,"transparency":false,"texture":"redWall"},{"p1":{"x":-155,"y":-237},"p2":{"x":-220,"y":-233},"color":"red","textureOffset":15.39069261850625,"transparency":false,"texture":"redWall"},{"p1":{"x":-220,"y":-233},"p2":{"x":-209,"y":-128},"color":"red","textureOffset":66.62029882510365,"transparency":false,"texture":"redWall"},{"p1":{"x":-209,"y":-128},"p2":{"x":-153,"y":-127},"color":"red","textureOffset":22.366480442636202,"transparency":false,"texture":"redWall"},{"p1":{"x":-153,"y":-127},"p2":{"x":-150,"y":-163},"color":"red","textureOffset":82.45575904025395,"transparency":false,"texture":"redWall"},{"p1":{"x":-150,"y":-163},"p2":{"x":-136,"y":-159},"color":"blue","textureOffset":43.70359640402279,"transparency":false,"texture":"blueWall"},{"p1":{"x":113,"y":-184},"p2":{"x":126,"y":-186},"color":"blue","textureOffset":0,"transparency":false,"texture":"blueWall"},{"p1":{"x":126,"y":-186},"p2":{"x":128,"y":-234},"color":"red","textureOffset":31.52946437965906,"transparency":false,"texture":"redWall"},{"p1":{"x":128,"y":-234},"p2":{"x":185,"y":-235},"color":"red","textureOffset":11.945950358231642,"transparency":false,"texture":"redWall"},{"p1":{"x":185,"y":-235},"p2":{"x":187,"y":-131},"color":"red","textureOffset":82.03366290780059,"transparency":false,"texture":"redWall"},{"p1":{"x":187,"y":-131},"p2":{"x":134,"y":-132},"color":"red","textureOffset":22.225952823468106,"transparency":false,"texture":"redWall"},{"p1":{"x":134,"y":-132},"p2":{"x":128,"y":-157},"color":"red","textureOffset":52.32028405141091,"transparency":false,"texture":"redWall"},{"p1":{"x":128,"y":-157},"p2":{"x":115,"y":-155},"color":"blue","textureOffset":9.419486695059732,"transparency":false,"texture":"blueWall"},{"p1":{"x":123,"y":-95},"p2":{"x":132,"y":-96},"color":"blue","textureOffset":0,"transparency":false,"texture":"blueWall"},{"p1":{"x":132,"y":-96},"p2":{"x":136,"y":-123},"color":"red","textureOffset":90.55385138137417,"transparency":false,"texture":"redWall"},{"p1":{"x":136,"y":-123},"p2":{"x":187,"y":-122},"color":"red","textureOffset":63.50073266049776,"transparency":false,"texture":"redWall"},{"p1":{"x":187,"y":-122},"p2":{"x":187,"y":-18},"color":"red","textureOffset":73.59876245477176,"transparency":false,"texture":"redWall"},{"p1":{"x":187,"y":-18},"p2":{"x":137,"y":-21},"color":"red","textureOffset":13.598762454771759,"transparency":false,"texture":"redWall"},{"p1":{"x":137,"y":-21},"p2":{"x":135,"y":-65},"color":"red","textureOffset":14.497953909499529,"transparency":false,"texture":"redWall"},{"p1":{"x":135,"y":-65},"p2":{"x":127,"y":-63},"color":"blue","textureOffset":54.95226482040431,"transparency":false,"texture":"blueWall"},{"p1":{"x":-14,"y":15},"p2":{"x":-25,"y":42},"color":"black","textureOffset":0,"transparency":false},{"p1":{"x":-25,"y":42},"p2":{"x":26,"y":41},"color":"black","textureOffset":91.547594742265,"transparency":false},{"p1":{"x":26,"y":41},"p2":{"x":15,"y":15},"color":"black","textureOffset":1.6456245365390032,"transparency":false},{"p1":{"x":-10,"y":-235},"p2":{"x":-25,"y":-268},"color":"black","textureOffset":0,"transparency":false},{"p1":{"x":-25,"y":-268},"p2":{"x":30,"y":-266},"color":"black","textureOffset":62.491379207837156,"transparency":false},{"p1":{"x":30,"y":-266},"p2":{"x":23,"y":-235},"color":"black","textureOffset":12.85489544051768,"transparency":false}],"entities":[{"pos":{"x":-182,"y":-176},"name":"Hanhec","rot":4.712,"roboType":"PyroDrone"},{"pos":{"x":161,"y":-174},"name":"Katjasby","rot":4.712,"roboType":"PyroDrone"},{"pos":{"x":-181,"y":-61},"name":"Janatky","rot":4.712,"roboType":"PyroDrone"},{"pos":{"x":162,"y":-76},"name":"Jahec","rot":4.712,"roboType":"PyroDrone"}],"triggerZones":[{"editID":0,"topleft":{"x":-50,"y":23},"bottomright":{"x":51,"y":69},"type":"AABB"},{"editID":1,"topleft":{"x":-41,"y":-283},"bottomright":{"x":54,"y":-241},"type":"AABB"}]}';
S2R1Level.onLoad = function() {
	this.opendoor = false;

	this.doorwall1 = new WallClass();
	this.doorwall1.p1 = {x:-10, y:-235};
	this.doorwall1.p2 = {x:23, y:-235};
	this.doorwall1.p1ClosePos = {x:-10, y:-235};
	this.doorwall1.p1OpenPos = {x:23, y:-235};
	this.doorwall1.texture = new Image();
	this.doorwall1.texture.src = './images/redWall.png';
	this.walls.push(this.doorwall1);

	this.doorwall2 = new WallClass();
	this.doorwall2.p1 = {x:-14, y:15};
	this.doorwall2.p2 = {x:15, y:15};
	this.doorwall2.p1ClosePos = {x:-14, y:15};
	this.doorwall2.p1OpenPos = {x:15, y:15};
	this.doorwall2.texture = new Image();
	this.doorwall2.texture.src = './images/blueWall.png';
	this.walls.push(this.doorwall2);

	this.enemiesleft = 0;
	for (var entity in this.entities) {
		if (this.entities[entity] == player) continue;

		this.enemiesleft++;
		this.entities[entity].brain.onDestroy = function() {
			this.level.enemiesleft--;

			if (this.level.enemiesleft <= 0) {
				this.level.opendoor = true;
			}
		}
	}

	var doortrigger1 = this.getTriggerZoneByEditID(0);
	doortrigger1.onTriggerEnter = function(entity) {
		if (entity == player) {
			S1R5Level.startIndex = 1;
			S1R5Level.load();
		}
	}

	var doortrigger2 = this.getTriggerZoneByEditID(1);
	doortrigger2.onTriggerEnter = function(entity) {
		if (entity == player) {
			// S2R2Level.startIndex = 0;
			// S2R2Level.load();
		}
	}
}
S2R1Level.onUpdate = function(deltaTime) {
	if (this.opendoor) {
		if (this.doorwall1.p1.x > this.doorwall1.p1OpenPos.x) {
			this.doorwall1.p1.x -= 0.1;
		}
		if (this.doorwall1.p1.x < this.doorwall1.p1OpenPos.x) {
			this.doorwall1.p1.x += 0.1;
		}
		if (this.doorwall1.p1.y > this.doorwall1.p1OpenPos.y) {
			this.doorwall1.p1.y -= 0.1;
		}
		if (this.doorwall1.p1.y < this.doorwall1.p1OpenPos.y) {
			this.doorwall1.p1.y += 0.1;
		}
		if (this.doorwall2.p1.x > this.doorwall2.p1OpenPos.x) {
			this.doorwall2.p1.x -= 0.1;
		}
		if (this.doorwall2.p1.x < this.doorwall2.p1OpenPos.x) {
			this.doorwall2.p1.x += 0.1;
		}
		if (this.doorwall2.p1.y > this.doorwall2.p1OpenPos.y) {
			this.doorwall2.p1.y -= 0.1;
		}
		if (this.doorwall2.p1.y < this.doorwall2.p1OpenPos.y) {
			this.doorwall2.p1.y += 0.1;
		}
	}
}